"use strict";(self["webpackChunkbilling"]=self["webpackChunkbilling"]||[]).push([[990],{9823:function(e,t,l){l.d(t,{Af:function(){return n},e2:function(){return a}});const a={null:"记账成功"},n={null:"添加类别成功","category name is duplicated":"类别名重复","category id is duplicated":"重复创建"}},917:function(e,t,l){l.r(t),l.d(t,{default:function(){return U}});var a=l(3396),n=l(4870),u=(l(7658),l(7139)),o=l(5103),i=l(2483);const r={class:"type-wrapper"},s={class:"type"};var c=(0,a.aZ)({__name:"Types",props:{modelValue:{type:String,default:"-"}},emits:["update:modelValue"],setup(e,{emit:t}){const l=(0,i.tv)(),n=e=>{if("-"!==e&&"+"!==e)throw new Error("type is unknown");t("update:modelValue",e)},c=()=>l.push({name:"billing"});return(t,l)=>((0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(o.Z,{name:"left",class:"left",onClick:c}),(0,a._)("ul",s,[(0,a._)("li",{class:(0,u.C_)({selected:"-"===e.modelValue}),onClick:l[0]||(l[0]=e=>n("-"))},"支出",2),(0,a._)("li",{class:(0,u.C_)({selected:"+"===e.modelValue}),onClick:l[1]||(l[1]=e=>n("+"))},"收入",2)])]))}}),d=l(89);const v=(0,d.Z)(c,[["__scopeId","data-v-99c2be9e"]]);var p=v;const m=e=>((0,a.dD)("data-v-2e64e767"),e=e(),(0,a.Cn)(),e),f={class:"category"},g=["onClick"],_=m((()=>(0,a._)("span",null,"设置",-1)));var y=(0,a.aZ)({__name:"CategoryItem",props:{modelValue:null,selected:null,type:null},emits:["update:selected"],setup(e,{emit:t}){const l=e=>{t("update:selected",e)};return(t,n)=>{const i=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("ul",f,[e.modelValue?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(e.modelValue,(t=>((0,a.wg)(),(0,a.iD)("li",{key:t.category},[(0,a._)("div",{class:(0,u.C_)(["category-item",{selected:e.selected.category===t.category}]),onClick:e=>l(t)},[(0,a.Wm)(o.Z,{name:t.iconName},null,8,["name"]),(0,a._)("span",null,(0,u.zw)(t.category),1)],10,g)])))),128)):(0,a.kq)("",!0),(0,a._)("li",null,[(0,a.Wm)(i,{to:{name:"category",query:{type:e.type}},class:"category-item"},{default:(0,a.w5)((()=>[(0,a.Wm)(o.Z,{name:"setting"}),_])),_:1},8,["to"])])])}}});const b=(0,d.Z)(y,[["__scopeId","data-v-2e64e767"]]);var k=b,C=l(9242),w=l(5743),h=l.n(w),x=l(670);const O={class:"numberPanel"},S={class:"panel-info"},V={class:"output"};var F=(0,a.aZ)({__name:"NumberPanel",props:{note:{type:String,default:()=>""},date:{type:String,default:()=>(new Date).toISOString()},account:{type:String,default:()=>"0.00"}},emits:["submit"],setup(e,{emit:t}){const l=e,o=(0,n.iH)(l.account.toString()),i=(0,n.iH)(h()(l.date).format("YYYY-MM-DD")),r=(0,n.iH)(l.note),s=e=>{const t=e.target.innerText;if(!(o.value.length>=16)){if("."===t){if(-1===o.value.indexOf("+")&&-1===o.value.indexOf("-")&&"0.00"!==o.value&&o.value.indexOf(".")>=0&&"."===t)return;if(o.value.split("-").length>=2){const e=o.value.split("-");if(""===e[1]||-1===e[1].indexOf("."))return o.value+=t;if(e[1].indexOf(".")>=0)return}if(o.value.split("+").length>=2){const e=o.value.split("+");if(""===e[1]||-1===e[1].indexOf("."))return o.value+=t;if(e[1].indexOf(".")>=0)return}}if("0.00"===o.value||"0"===o.value){if("0123456789".indexOf(t)>=0)return o.value=t;if("+-".indexOf(t)>=0)return;if("."===t)return o.value="0"+t}if("+-".indexOf(t)>=0){if(o.value.indexOf("+")>=0||o.value.indexOf("-")>=0)if(1===o.value.split("+").length){let e=o.value.split("-");o.value=""===e[1]?e[0]+t:(parseFloat(e[0])-parseFloat(e[1])).toString()}else{let e=o.value.split("+");o.value=""===e[1]?e[0]+t:(parseFloat(e[0])+parseFloat(e[1])).toString()}return o.value=parseFloat(o.value)+t}o.value+=t}},c=()=>{const e=o.value.slice(0,-1);o.value=e.length>0?e:"0.00"},d=()=>{o.value="0.00"},v=()=>{o.value=l.account,i.value=h()(l.date).format("YYYY-MM-DD"),r.value=l.note},p=()=>{if(o.value.indexOf("+")>=0||o.value.indexOf("-")>=0)if(1===o.value.split("+").length){let e=o.value.split("-");"."===e[1]&&(e[1]="0"),o.value=(parseFloat(e[0])-parseFloat(e[1])).toString()}else{let e=o.value.split("+");"."===e[1]&&(e[1]="0"),o.value=(parseFloat(e[0])+parseFloat(e[1])).toString()}if(o.value=parseFloat(o.value).toString(),parseFloat(o.value)<0||"0.00"===o.value||"0"===o.value)return(0,x.Z)({message:"金额需大于0",type:"error"});t("submit",{note:r.value,account:parseFloat(o.value),createAt:i.value}),v()};return(e,t)=>((0,a.wg)(),(0,a.iD)("div",O,[(0,a._)("div",S,[(0,a.wy)((0,a._)("input",{class:"notes",type:"text",placeholder:"点击输入备注","onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e)},null,512),[[C.nr,r.value]]),(0,a._)("div",V,"￥"+(0,u.zw)(o.value),1)]),(0,a.wy)((0,a._)("input",{class:"panel-info date",type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e)},null,512),[[C.nr,i.value]]),(0,a._)("div",{class:"numberPad"},[(0,a._)("button",{onClick:s},"7"),(0,a._)("button",{onClick:s},"8"),(0,a._)("button",{onClick:s},"9"),(0,a._)("button",{onClick:s},"+"),(0,a._)("button",{onClick:s},"4"),(0,a._)("button",{onClick:s},"5"),(0,a._)("button",{onClick:s},"6"),(0,a._)("button",{onClick:s},"-"),(0,a._)("button",{onClick:s},"1"),(0,a._)("button",{onClick:s},"2"),(0,a._)("button",{onClick:s},"3"),(0,a._)("button",{onClick:d},"清空"),(0,a._)("button",{onClick:s},"0"),(0,a._)("button",{onClick:s},"."),(0,a._)("button",{onClick:c},"删除"),(0,a._)("button",{onClick:p},"完成")])]))}});const Z=(0,d.Z)(F,[["__scopeId","data-v-3814917f"]]);var D=Z,H=l(65),Y=l(9823),I=(0,a.aZ)({__name:"Money",setup(e){const t=(0,n.iH)("-"),l=(0,H.oR)(),u=(0,a.Fl)((()=>l.state.categoryList)),o=(0,a.Fl)((()=>u.value.filter((e=>e.isShow&&e.type===t.value)))),i=(0,n.iH)(o.value[0]||[]);(0,a.Rh)((()=>{i.value=o.value[0]}));const r=(0,n.iH)(""),s=(0,n.iH)("0.00"),c=(0,n.iH)((new Date).toISOString()),d=e=>{if(void 0===i.value)return(0,x.Z)({message:"请选择标签",type:"error"});Object.assign(e,{category:i.value.category,type:t.value}),l.commit("createRecord",e),(0,x.Z)({message:Y.e2[l.state.createRecordError]})},v=(0,n.iH)();return(0,a.bv)((()=>{v.value.style.height=(document.documentElement.clientHeight||document.body.clientHeight)+"px"})),(e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"wrapper",ref_key:"wrapper",ref:v},[(0,a.Wm)(p,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e)},null,8,["modelValue"]),(0,a.Wm)(k,{type:t.value,modelValue:(0,n.SU)(o),"onUpdate:modelValue":l[1]||(l[1]=e=>(0,n.dq)(o)?o.value=e:null),selected:i.value,"onUpdate:selected":l[2]||(l[2]=e=>i.value=e)},null,8,["type","modelValue","selected"]),(0,a.Wm)(D,{note:r.value,account:s.value,date:c.value,onSubmit:d},null,8,["note","account","date"])],512))}});const W=(0,d.Z)(I,[["__scopeId","data-v-0e3b91c2"]]);var U=W}}]);
//# sourceMappingURL=money.1cd45deb.js.map