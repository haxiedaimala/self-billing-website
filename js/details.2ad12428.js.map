{"version":3,"file":"js/details.2ad12428.js","mappings":"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","sources":["webpack://billing/./src/lib/detailInput.ts","webpack://billing/./src/views/Details.vue?4d13","webpack://billing/./src/views/Details.vue"],"sourcesContent":["import filterGroupList from '@/lib/filterGroupList';\r\nimport openDialog from '@/lib/openDialog';\r\nimport {computed, Ref} from 'vue';\r\nimport dayjs from 'dayjs';\r\nimport openMessage from '@/lib/openMessage';\r\n\r\nexport function detailInput(year: Ref<number>, month: Ref<number>) {\r\n  const toggleMonth = () => {\r\n    const ok = (text: string) => {\r\n      if (text === '') return openMessage({message: '月份不能为空', type: 'error'});\r\n      if (text === null) return;\r\n      if (!/^\\d{2}$/.test(text!) && !/^\\d$/.test(text!) || parseInt(text) > 12) return openMessage({\r\n        message: '只能输入1-12的数字',\r\n        type: 'error'\r\n      });\r\n      month.value = parseInt(text!);\r\n    };\r\n    openDialog({ok: ok, header: '请输入查询的月份：'});\r\n  };\r\n  const toggleYear = () => {\r\n    const ok = (text: string) => {\r\n      if (text === '') return openMessage({message: '年份不能为空', type: 'error'});\r\n      if (text === null) return;\r\n      if (!/^\\d{4}$/.test(text!)) return openMessage({message: '只能输入4个数字', type: 'error'});\r\n      year.value = parseInt(text!);\r\n    };\r\n    openDialog({ok: ok, header: '请输入查询的年份：'});\r\n  };\r\n  const monthGroupList = computed(() => filterGroupList('month')?.filter(item => dayjs(item.createAt).year() === year.value && dayjs(item.createAt).month() === month.value - 1) || []);\r\n  const monthSum = computed(() => {\r\n    if (monthGroupList.value.length === 0) return 0;\r\n    return monthGroupList.value.reduce((sum, item) => sum + item.sum, 0);\r\n  });\r\n  const monthExpend = computed(() => {\r\n    if (monthGroupList.value.length === 0) return '暂无';\r\n    return monthGroupList.value.reduce((sum, item) => sum + item.expend, 0);\r\n  });\r\n  const monthIncome = computed(() => {\r\n    if (monthGroupList.value.length === 0) return '暂无';\r\n    return monthGroupList.value.reduce((sum, item) => sum + item.income, 0);\r\n  });\r\n  return {\r\n    monthSum,\r\n    monthExpend,\r\n    monthIncome,\r\n    toggleYear,\r\n    toggleMonth,\r\n    monthGroupList\r\n  };\r\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, toDisplayString as _toDisplayString, unref as _unref, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-42a0cc80\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"nav\" }\nconst _hoisted_2 = { class: \"details-content\" }\nconst _hoisted_3 = { class: \"details\" }\nconst _hoisted_4 = { class: \"top\" }\nconst _hoisted_5 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", { class: \"title\" }, \"收支记录\", -1))\nconst _hoisted_6 = { class: \"content\" }\nconst _hoisted_7 = { class: \"title\" }\nconst _hoisted_8 = { class: \"sum\" }\nconst _hoisted_9 = { class: \"icon-wrapper\" }\nconst _hoisted_10 = { class: \"details-info\" }\nconst _hoisted_11 = { class: \"category-sum\" }\nconst _hoisted_12 = { key: 0 }\nconst _hoisted_13 = { class: \"note\" }\nconst _hoisted_14 = {\n  key: 1,\n  class: \"no-show\"\n}\n\nimport Icon from '@/components/Icon.vue';\r\nimport DetailList from '@/components/Detail-List.vue';\r\nimport filterGroupList from '@/lib/filterGroupList';\r\nimport {computed, ref} from 'vue';\r\nimport dayjs from 'dayjs';\r\nimport {useRoute, useRouter} from 'vue-router';\r\nimport {useStore} from 'vuex';\r\nimport {detailInput} from '@/lib/detailInput';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Details',\n  setup(__props) {\n\r\nconst route = useRoute();\r\nconst store = useStore();\r\nconst router = useRouter();\r\nconst routeYear = route.query.year as string;\r\nconst routeMonth = route.query.month as string;\r\nconst year = ref(parseInt(routeYear) || dayjs().year());\r\nconst month = ref(parseInt(routeMonth) || dayjs().month() + 1);\r\nconst {toggleMonth, toggleYear, monthSum, monthExpend, monthIncome} = detailInput(year, month);\r\nconst goBack = () => router.push({name: 'billing'});\r\nconst categoryList = computed<Category[]>(() => store.state.categoryList);\r\nconst showDayList = computed(() => {\r\n  const dayGroupList = computed(() => filterGroupList('day')?.filter(item => dayjs(item.createAt).year() === year.value && dayjs(item.createAt).month() === month.value - 1) || []);\r\n  let arr = [];\r\n  for (let i = 0; i < dayGroupList.value.length; i++) {\r\n    arr[i] = {\r\n      createAt: dayGroupList.value[i].createAt,\r\n      expend: dayGroupList.value[i].expend,\r\n      income: dayGroupList.value[i].income,\r\n      sum: dayGroupList.value[i].sum,\r\n      items: [...dayGroupList.value[i].exItems, ...dayGroupList.value[i].inItems]\r\n    };\r\n  }\r\n  return arr;\r\n});\r\nconst selectIcon = (value: string) => categoryList.value.filter(item => item.category === value)[0].iconName;\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_router_link = _resolveComponent(\"router-link\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(Icon, {\n        name: \"left\",\n        onClick: goBack\n      }),\n      _createElementVNode(\"button\", null, [\n        _createElementVNode(\"span\", {\n          class: \"year\",\n          onClick: _cache[0] || (_cache[0] = \n//@ts-ignore\n(...args) => (_unref(toggleYear) && _unref(toggleYear)(...args)))\n        }, _toDisplayString(year.value), 1),\n        _createTextVNode(\"年 \"),\n        _createElementVNode(\"span\", {\n          class: \"month\",\n          onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_unref(toggleMonth) && _unref(toggleMonth)(...args)))\n        }, _toDisplayString(month.value), 1),\n        _createTextVNode(\"月的账单 \")\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(DetailList, {\n        class: \"list-top\",\n        \"top-title\": `${year.value}年${month.value}月账本`,\n        type: \"月\",\n        sum: _unref(monthSum),\n        expend: _unref(monthExpend),\n        income: _unref(monthIncome)\n      }, null, 8, [\"top-title\", \"sum\", \"expend\", \"income\"]),\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"div\", _hoisted_4, [\n          _hoisted_5,\n          _createVNode(_component_router_link, {\n            to: {name:'money'},\n            class: \"add\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(\"+ 新建\")\n            ]),\n            _: 1\n          })\n        ]),\n        _createElementVNode(\"div\", _hoisted_6, [\n          (_unref(showDayList).length>0)\n            ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(_unref(showDayList), (dayGroup) => {\n                return (_openBlock(), _createElementBlock(\"div\", {\n                  class: \"item\",\n                  key: dayGroup.createAt\n                }, [\n                  _createElementVNode(\"div\", _hoisted_7, [\n                    _createElementVNode(\"span\", null, _toDisplayString(_unref(dayjs)(dayGroup.createAt).format('MM.DD')), 1),\n                    _createElementVNode(\"span\", null, _toDisplayString(_unref(dayjs)(dayGroup.createAt).format('dddd')), 1),\n                    _createElementVNode(\"span\", _hoisted_8, \"总结：￥\" + _toDisplayString(dayGroup.sum), 1)\n                  ]),\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(dayGroup.items, (item, index) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                      class: \"detail\",\n                      key: index\n                    }, [\n                      _createElementVNode(\"div\", _hoisted_9, [\n                        _createVNode(Icon, {\n                          name: selectIcon(item.category)\n                        }, null, 8, [\"name\"])\n                      ]),\n                      _createElementVNode(\"div\", _hoisted_10, [\n                        _createElementVNode(\"div\", _hoisted_11, [\n                          _createElementVNode(\"span\", null, _toDisplayString(item.category), 1),\n                          _createElementVNode(\"span\", null, [\n                            (item.type==='-')\n                              ? (_openBlock(), _createElementBlock(\"span\", _hoisted_12, \"-\"))\n                              : _createCommentVNode(\"\", true),\n                            _createElementVNode(\"span\", null, \"￥\" + _toDisplayString(item.account), 1)\n                          ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_13, _toDisplayString(item.note), 1)\n                      ])\n                    ]))\n                  }), 128))\n                ]))\n              }), 128))\n            : (_openBlock(), _createElementBlock(\"div\", _hoisted_14, \"暂无记录~~~\"))\n        ])\n      ])\n    ])\n  ], 64))\n}\n}\n\n})","import script from \"./Details.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Details.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Details.vue?vue&type=style&index=0&id=42a0cc80&lang=scss&scoped=true\"\n\nimport exportComponent from \"E:\\\\Desktop\\\\new\\\\billing\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-42a0cc80\"]])\n\nexport default __exports__"],"names":["detailInput","year","month","toggleMonth","ok","text","openMessage","message","type","test","parseInt","value","openDialog","header","toggleYear","monthGroupList","computed","filterGroupList","filter","item","dayjs","createAt","monthSum","length","reduce","sum","monthExpend","expend","monthIncome","income","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createElementVNode","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","key","_hoisted_13","_hoisted_14","_defineComponent","__name","setup","__props","route","useRoute","store","useStore","router","useRouter","routeYear","query","routeMonth","ref","goBack","push","name","categoryList","state","showDayList","dayGroupList","arr","i","items","exItems","inItems","selectIcon","category","iconName","_ctx","_cache","_component_router_link","_resolveComponent","_openBlock","_createElementBlock","_Fragment","_createVNode","Icon","onClick","args","_unref","_toDisplayString","_createTextVNode","DetailList","to","default","_withCtx","_","_renderList","dayGroup","format","index","_createCommentVNode","account","note","__exports__"],"sourceRoot":""}